# =============================================================================
# Open Sousveillance Studio - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.
# Required variables are marked with [REQUIRED].

# =============================================================================
# LLM & AI Services
# =============================================================================

# [REQUIRED] Google Gemini API Key
# Get yours at: https://aistudio.google.com/apikey
GOOGLE_API_KEY=your_google_api_key_here

# Tavily Search API (for fast web research - Layer 2 Analyst)
# Get yours at: https://tavily.com
TAVILY_API_KEY=your_tavily_api_key_here

# Firecrawl API (for web scraping)
# Get yours at: https://firecrawl.dev
FIRECRAWL_API_KEY=your_firecrawl_api_key_here

# =============================================================================
# Research Providers (Layer 2 Analysis)
# =============================================================================
# The AnalystAgent can use multiple research providers:
# - Tavily: Fast web search (requires TAVILY_API_KEY above)
# - Gemini Deep Research: Comprehensive agentic research (uses GOOGLE_API_KEY)
#
# Both are used by default. Gemini Deep Research requires google-genai package:
#   pip install google-genai

# =============================================================================
# Database (Supabase)
# =============================================================================

# [REQUIRED] Supabase Project URL
# Found in: Supabase Dashboard > Settings > API
SUPABASE_URL=https://your-project-id.supabase.co

# [REQUIRED] Supabase Anon/Public Key
# Found in: Supabase Dashboard > Settings > API > anon public
SUPABASE_KEY=your_supabase_anon_key_here

# =============================================================================
# Task Queue (Celery + Redis)
# =============================================================================

# Redis URL for Celery broker (defaults to redis://localhost:6379/0)
CELERY_BROKER_URL=redis://localhost:6379/0

# Redis URL for Celery result backend (defaults to redis://localhost:6379/0)
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# =============================================================================
# Notifications (Optional)
# =============================================================================

# Resend API Key (for email delivery)
# Get yours at: https://resend.com
RESEND_API_KEY=your_resend_api_key_here

# Discord Webhook URL (for Discord notifications)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your_webhook_here

# =============================================================================
# API Security
# =============================================================================

# API key for authenticating protected endpoints (/run, /approvals, /runs)
# Generate a strong random key: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Leave blank to disable auth (development only)
API_KEY=

# Daily LLM budget cap in USD (0 = unlimited)
# Circuit breaker triggers when budget exceeded, warns at 80%
LLM_DAILY_BUDGET_USD=5.00

# Allowed CORS origins (comma-separated)
# Default: http://localhost:8501,http://localhost:8000 (Streamlit + API)
CORS_ORIGINS=http://localhost:8501,http://localhost:8000

# =============================================================================
# Server Configuration
# =============================================================================

# Host to bind to (default: 127.0.0.1 for security, use 0.0.0.0 for Docker)
HOST=127.0.0.1

# Port to listen on (default: 8000)
PORT=8000

# Enable auto-reload for development (default: true)
RELOAD=true

# =============================================================================
# Logging
# =============================================================================

# Logging
LOG_LEVEL=INFO           # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=console       # console (colored) or json
LOG_DIR=logs/            # Directory for log files
LOG_FILE_ENABLED=true    # Enable file logging
LOG_RETENTION_DAYS=30    # Days to keep old logs
LOG_MAX_BYTES=10485760   # 10MB max per file

# =============================================================================
# Apify
# =============================================================================

# Apify API Key
APIFY_API_KEY=your_apify_api_key_here
